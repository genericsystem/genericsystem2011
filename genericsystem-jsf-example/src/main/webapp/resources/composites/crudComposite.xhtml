<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:composite="http://java.sun.com/jsf/composite">

<composite:interface>
	<composite:attribute name="component" />
</composite:interface>

<composite:implementation>
	<h:messages />
	<h:dataTable value="#{cc.attrs.component.instanceRows}" var="row"
		styleClass="order-table" headerClass="order-table-header"
		rowClasses="order-table-odd-row,order-table-even-row">
		<f:facet name="header">
			<h:outputText value="#{cc.attrs.component.nameManagement}" />
		</f:facet>
		<h:column>
			<f:facet name="header">
				<h:outputText value="#{cc.attrs.component.value}" />
			</f:facet>
			<h:outputText value="#{row.value}" />
			<f:facet name="footer">
				<h:inputText value="#{cc.attrs.component.addInstanceValue}" />
			</f:facet>
		</h:column>
		<c:forEach items="#{cc.attrs.component.attributeWrappers}" var="att">
			<h:column>
				<f:facet name="header">
					<h:outputText value="#{att.columnTitleAttribute}" />
				</f:facet>
				<h:outputText value="#{row.getAttributeValue(att.attribute)}" />
				<f:facet name="footer">
					<h:panelGroup>
						<h:inputText rendered="#{!att.relation}"
							value="#{att.newAttributeValue}" />
						<h:selectOneMenu rendered="#{att.relation}"
							value="#{att.newTargetValue}">
							<f:selectItems value="#{att.targetInstanceRows}"
								var="targetRow" itemValue="#{targetRow.value}"
								itemLabel="#{targetRow.value}" />
						</h:selectOneMenu>
					</h:panelGroup>
				</f:facet>
			</h:column>
		</c:forEach>
		<h:column>
			<h:commandLink value="#{cc.attrs.component.removeMsg}"
				action="#{cc.attrs.component.remove(row)}" />
			<f:facet name="footer">
				<h:commandButton value="#{cc.attrs.component.addMsg}"
					action="#{cc.attrs.component.add}" />
			</f:facet>
		</h:column>
	</h:dataTable>
</composite:implementation>
</html>