<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

	<h:panelGrid id="createGenericPopup">
		<rich:popupPanel domElementAttachment="form" id="createTypePopup"
			modal="true" resizeable="false" moveable="false" autosized="true">
			<f:facet name="header">
				<h:outputText styleclass="uppercase"
					value="#{msg.create} #{msg.a} #{msg.type}" />
			</f:facet>
			<f:facet name="controls">
				<h:outputLink value="#"
					onclick="#{rich:component('createTypePopup')}.hide(); return false;">
					#{msg.close}</h:outputLink>
			</f:facet>
			<h:outputText styleClass="capitalize"
				value="#{msg.create} #{msg.a} #{msg.type} : " />
			<h:inputText value="#{typesManager.type}" />
			<a4j:commandButton execute="createTypePopup" value="#{msg.create}"
				action="#{typesManager.createType}" render="menu, createMultipleInheritanceTypePopup" />
		</rich:popupPanel>

		<rich:popupPanel domElementAttachment="form" id="createSubTypePopup"
			modal="true" resizeable="false" moveable="false" autosized="true">
			<f:facet name="header">
				<h:outputText styleClass="uppercase"
					value="#{msg.create} #{msg.a} #{msg.subtype} #{msg.of} #{selectedType}" />
			</f:facet>
			<f:facet name="controls">
				<h:outputLink value="#"
					onclick="#{rich:component('createSubTypePopup')}.hide(); return false;">
					#{msg.close}</h:outputLink>
			</f:facet>
			<h:outputText styleClass="capitalize"
				value="#{msg.create} #{msg.a} #{msg.subtype} : " />
			<h:inputText value="#{typesManager.subType}" />
			<a4j:commandButton execute="createSubTypePopup" value="#{msg.create}"
				action="#{typesManager.createSubType}" render="menu, createMultipleInheritanceTypePopup" />
		</rich:popupPanel>

	<rich:popupPanel domElementAttachment="form" id="createPropertyPopup"
			modal="true" resizeable="false" moveable="false" autosized="true">
			<f:facet name="header">
				<h:outputText styleClass="uppercase"
					value="#{msg.create} #{msg.a} #{msg.propertie} #{msg.of} #{selectedType}" />
			</f:facet>
			<f:facet name="controls">
				<h:outputLink value="#"
					onclick="#{rich:component('createPropertyPopup')}.hide(); return false;">
					#{msg.close}</h:outputLink>
			</f:facet>
			<h:outputText styleClass="capitalize"
				value="#{msg.create} #{msg.a} #{msg.propertie} : " />
			<h:inputText value="#{typesManager.property}" />
			<a4j:commandButton execute="createPropertyPopup"
				value="#{msg.create}" action="#{typesManager.createProperty}"
				render="instancesPanel" />
		</rich:popupPanel>

		<rich:popupPanel domElementAttachment="form" id="createAttributePopup"
			modal="true" resizeable="false" moveable="false" autosized="true">
			<f:facet name="header">
				<h:outputText styleClass="uppercase"
					value="#{msg.create} #{msg.a} #{msg.attribute} #{msg.of} #{selectedType}" />
			</f:facet>
			<f:facet name="controls">
				<h:outputLink value="#"
					onclick="#{rich:component('createAttributePopup')}.hide(); return false;">
					#{msg.close}</h:outputLink>
			</f:facet>
			<h:outputText styleClass="capitalize"
				value="#{msg.create} #{msg.a} #{msg.attribute} : " />
			<h:inputText value="#{typesManager.attribute}" />
			<a4j:commandButton execute="createAttributePopup"
				value="#{msg.create}" action="#{typesManager.createAttribute}"
				render="instancesPanel" />
		</rich:popupPanel>

		<rich:popupPanel domElementAttachment="form" id="createRelationPopup"
			modal="true" resizeable="false" moveable="false" autosized="true">
			<f:facet name="header">
				<h:outputText styleClass="uppercase"
					value="#{msg.create} #{msg.a} #{msg.relation} #{msg.of} #{selectedType}" />
			</f:facet>
			<f:facet name="controls">
				<h:outputLink value="#"
					onclick="#{rich:component('createRelationPopup')}.hide(); return false;">
					#{msg.close}</h:outputLink>
			</f:facet>
			<h:outputText styleClass="capitalize"
				value="#{msg.create} #{msg.a} #{msg.relation} : " />
			<h:inputText value="#{createRelationManager.relationName}" />
			<rich:dataTable id="targets" styleClass="instancesPanel"
				value="#{createRelationManager.targets}" var="target">
				<rich:column>
					<f:facet name="header">
						<h:outputText styleClass="capitalize" value="#{msg.name}" />
					</f:facet>
					<h:outputText value="#{target}" />
				</rich:column>
				<rich:column>
					<a4j:commandButton value="#{msg.delete}"
						action="#{createRelationManager.remove(target)}"
						render="targets" />
				</rich:column>
			</rich:dataTable>
			
			<h:outputText styleClass="capitalize" value="#{msg.target} : " />
			<h:selectOneMenu value="#{createRelationManager.targetSelected}">
				<f:selectItems value="#{typesProvider.types}" />
			</h:selectOneMenu>
			<a4j:commandButton value="#{msg.add} #{msg.target}"
				action="#{createRelationManager.addTarget}" render="targets" />
				
			<a4j:commandButton value="#{msg.create} #{msg.relation}"
				action="#{createRelationManager.createRelation}" render="targets, instancesPanel" />
		</rich:popupPanel>

		<rich:popupPanel domElementAttachment="form"
			id="createMultipleInheritanceTypePopup" modal="true"
			resizeable="false" moveable="false" autosized="true">
			<f:facet name="header">
				<h:outputText styleClass="uppercase"
					value="#{msg.create} #{msg.a} #{msg.multiple} #{msg.inheritance} #{msg.type}" />
			</f:facet>
			<f:facet name="controls">
				<h:outputLink value="#"
					onclick="#{rich:component('createMultipleInheritanceTypePopup')}.hide(); return false;">
					#{msg.close}</h:outputLink>
			</f:facet>
			<h:outputText styleClass="capitalize"
				value="#{msg.create} #{msg.a} #{msg.multiple} #{msg.inheritance} #{msg.type}: " />
			<h:inputText value="#{typesManager.multipleInheritanceType}" />
			<rich:dataTable id="typesTargets" styleClass="instancesPanel"
				value="#{typesManager.typesTargets}" var="typeTarget">
				<rich:column>
					<f:facet name="header">
						<h:outputText styleClass="capitalize" value="#{msg.name}" />
					</f:facet>
					<h:outputText value="#{typeTarget}" />
				</rich:column>
				<rich:column>
					<a4j:commandButton value="#{msg.delete}"
						action="#{typesManager.removeType(typeTarget)}" render="typesTargets" />
				</rich:column>
			</rich:dataTable>
			<h:outputText styleClass="capitalize" value="#{msg.type} : " />
			<h:selectOneMenu value="#{typesManager.typeTargetSelected}">
				<f:selectItems value="#{typesProvider.types}" />
			</h:selectOneMenu>
			<a4j:commandButton value="#{msg.add} #{msg.type}"
				action="#{typesManager.addTypeTarget}" render="typesTargets" />

			<a4j:commandButton value="#{msg.create} #{msg.multiple} #{msg.inheritance} #{msg.type}"
				action="#{typesManager.createMultipleInheritanceType}"
				render="typesTargets, menu" />
		</rich:popupPanel>
		
	</h:panelGrid>

</ui:composition>