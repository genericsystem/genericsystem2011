<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:gs="http://java.sun.com/jsf/composite/gs">

	<rich:toolbar id="toolbar" itemSeparator="grid"
		itemStyle="padding: 0 4px;"
		style="background-color: inherit; background-image: inherit; border: medium none;">

		<rich:toolbarGroup>
			<a4j:status name="panelUpdateStatus">
				<f:facet name="start">
                        (Updating)
                    </f:facet>
			</a4j:status>

			<h:outputText rendered="#{fileSystemBean.fileSelected}"
				value="#{fileSystemBean.fileShortPath}" />
			<h:outputText rendered="#{fileSystemBean.directorySelected}"
				value="#{fileSystemBean.directoryShortPath}" />

			<a4j:commandLink rendered="#{fileSystemBean.directorySelected}"
				oncomplete="#{rich:component('createfile')}.show()">
				<h:graphicImage value="#{infos.document_add}"
					title="#{msg.create} #{msg.a} #{msg.file}" />
			</a4j:commandLink>

<!-- 			<a4j:commandLink rendered="#{fileSystemBean.directorySelected}" -->
<!-- 				oncomplete="#{rich:component('createsubdirectory')}.show()"> -->
<!-- 				<h:graphicImage value="#{infos.folder_add}" -->
<!-- 					title="#{msg.create} #{msg.a} #{msg.sub} #{msg.directory}" /> -->
<!-- 			</a4j:commandLink> -->

			<a4j:commandLink id="save" execute="editFile" action="HOME"
				rendered="#{fileSystemBean.fileSelected}" status="panelUpdateStatus"
				onclick="editor.save();">
				<h:graphicImage value="#{infos.floppy_disk}" title="#{msg.apply}" />
			</a4j:commandLink>

<!-- 			<h:commandLink action="#{fileSystemBean.delete}" -->
<!-- 				rendered="#{fileSystemBean.fileSelected || fileSystemBean.directorySelected}" -->
<!-- 				onclick="if (! window.confirm('#{msg.popupRemove}') ) {return false;}"> -->
<!-- 				<h:graphicImage value="#{infos.delete}" title="#{msg.delete}" /> -->
<!-- 			</h:commandLink> -->

<!-- 			<a4j:commandLink -->
<!-- 				oncomplete="#{rich:component('newrootdirectory')}.show();"> -->
<!-- 				<h:graphicImage value="#{infos.add}" -->
<!-- 					title="#{msg.add} #{msg.a} #{msg.root} #{msg.directory}" /> -->
<!-- 			</a4j:commandLink> -->
			<rich:hotKey key="ctrl+1" onkeyup="#{rich:element('save')}.click();" />
		</rich:toolbarGroup>

		<rich:toolbarGroup>
			<a4j:commandLink action="#" render="@all">
				<h:graphicImage value="#{infos.refresh}" title="#{msg.refreshAjax}" />
			</a4j:commandLink>

			<h:commandLink action="#">
				<h:graphicImage value="#{infos.refresh}" title="#{msg.refreshJsf}" />
			</h:commandLink>

			<h:commandLink action="#{sessionBean.invalidate}"
				onclick="if (! window.confirm('#{msg.invalidateSessionConfirm}') ) {return false}">
				<h:graphicImage value="#{infos.lifebelt}"
					title="#{msg.invalidateSession}" />
			</h:commandLink>

			<ui:include src="/pages/cachemanager.xhtml" />
		</rich:toolbarGroup>
	</rich:toolbar>
</ui:composition>
