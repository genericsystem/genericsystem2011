<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:gs="http://java.sun.com/jsf/composite/gs">

	<rich:panel styleClass="widthScroll280 fullHeight">
		<rich:tree id="directorytree" toggleType="ajax" var="item"
			status="panelUpdateStatus" selectionType="ajax" render="toolbar,edit"
			selectionChangeListener="#{fileSystemBean.changeFile}">
			<rich:treeModelRecursiveAdaptor
				roots="#{fileSystemBean.rootDirectories}"
				nodes="#{fileSystemBean.getDirectories(item)}">
				<rich:treeNode>
					<!-- value="#{fileSystemBean.getWrapper(item).shortPath}" -->
					<rich:inplaceInput styleClass="inplaceInput"
						value="#{item.shortPath}" editEvent="dblclick"
						valueChangeListener="#{fileSystemBean.updateShortPath}">
						<a4j:ajax event="change" render="directorytree,toolbar" />
					</rich:inplaceInput>
					<!-- <a4j:commandLink
						oncomplete="#{rich:component('modifyValue')}.show()">
						<h:graphicImage value="#{infos.edit}"
							title="#{msg.update} #{msg.the} #{msg.value}" />
					</a4j:commandLink> -->
				</rich:treeNode>
				<rich:treeModelAdaptor nodes="#{fileSystemBean.getFiles(item)}">
					<rich:treeNode>
						<rich:inplaceInput styleClass="inplaceInput"
							value="#{item.shortPath}" editEvent="dblclick"
							valueChangeListener="#{fileSystemBean.updateShortPath}">
							<a4j:ajax event="change" render="directorytree,toolbar" />
						</rich:inplaceInput>
						<!-- <a4j:commandLink
							oncomplete="#{rich:component('modifyValue')}.show()">
							<h:graphicImage value="#{infos.edit}"
								title="#{msg.update} #{msg.the} #{msg.value}" />
						</a4j:commandLink> -->
					</rich:treeNode>
				</rich:treeModelAdaptor>
			</rich:treeModelRecursiveAdaptor>
		</rich:tree>
	</rich:panel>
</ui:composition>