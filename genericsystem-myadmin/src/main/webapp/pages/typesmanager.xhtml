<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:gs="http://java.sun.com/jsf/composite/gs">

	<rich:panel id="typesmanager" styleClass="fullWidth"
		style="border-width:0;padding:0;">
		<f:facet name="header">
			<h:panelGrid columns="2" columnClasses="fullWidth,">
				<h:outputText styleClass="uppercase"
					value="#{msg.type} #{msg.manager}" />
				<h:outputText style="white-space: nowrap;"
					rendered="#{not empty typesBean.selectedType}"
					value="#{typesBean.selectedType.toCategoryString()}" />
			</h:panelGrid>
		</f:facet>
		<h:panelGrid columns="2" styleClass="fullWidth"
			rowClasses="fullHeight"
			columnClasses="topAlign mediumScroll fullHeight,topAlign fullWidth fullHeight">
			<ui:include src="/pages/typestree.xhtml" />
			<ui:include src="/pages/edittypes.xhtml" />
		</h:panelGrid>
		<rich:contextMenu target="paneltypes" mode="ajax">
			<rich:menuItem label="#{msg.add} #{msg.a} #{msg.type}"
				oncomplete="#{rich:component('newtype')}.show()" mode="ajax"
				icon="#{infos.add}" />
		</rich:contextMenu>
	</rich:panel>

	<gs:popupPanel key="newtype" title="#{msg.add} #{msg.a} #{msg.type}"
		action="#{typesBean.newType(popupValue)}" render="typestree" />
	<gs:popupPanel key="createsubtype"
		title="#{msg.create} #{msg.a} #{msg.sub} #{msg.type}"
		action="#{typesBean.newSubType(popupValue)}" render="directorytree" />
	<gs:popupPanel key="createattribute"
		title="#{msg.create} #{msg.a} #{msg.attribute}"
		action="#{typesBean.addAttribute(popupValue)}" render="directorytree" />
	<gs:popupPanel key="createinstance"
		title="#{msg.create} #{msg.a} #{msg.instance}"
		action="#{typesBean.newInstance(popupValue)}" render="directorytree" />

</ui:composition>